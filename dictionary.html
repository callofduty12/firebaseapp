<!DOCTYPE html>
<html>
<head>
  <title>Dictionary App</title>
</head>
<body>
  <h2>Dictionary (English ↔ Hindi)</h2>
  <input type="text" id="wordInput" placeholder="Enter word">
  <button onclick="searchWord()">Search</button>
  
  <div id="result"></div>

  <script>
    async function searchWord() {
      let word = document.getElementById("wordInput").value.trim();
      let resultDiv = document.getElementById("result");
      resultDiv.innerHTML = "Loading...";

      try {
        let meaning = "Not found";
        let example = "Not available";
        let audio = "";

        // 1. English Meaning + Pronunciation
        try {
          let dictRes = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`);
          if (dictRes.ok) {
            let dictData = await dictRes.json();
            meaning = dictData[0].meanings[0].definitions[0].definition || meaning;
            example = dictData[0].meanings[0].definitions[0].example || example;
            audio = dictData[0].phonetics[0]?.audio || "";
          }
        } catch (e) {
          console.log("Dictionary API error:", e);
        }

        // 2. Hindi Translation (using LibreTranslate free server)
        let hindi = "Not available";
        try {
          let transRes = await fetch("https://libretranslate.de/translate", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ q: word, source: "en", target: "hi" })
          });
          if (transRes.ok) {
            let transData = await transRes.json();
            hindi = transData.translatedText;
          }
        } catch (e) {
          console.log("Translation API error:", e);
        }

        // Display results
        resultDiv.innerHTML = `
          <h3>${word}</h3>
          <p><b>English Meaning:</b> ${meaning}</p>
          <p><b>Hindi Meaning:</b> ${hindi}</p>
          <p><b>Example:</b> ${example}</p>
          ${audio ? `<audio controls src="${audio}"></audio>` : ""}
        `;
      } catch (err) {
        resultDiv.innerHTML = "❌ Something went wrong. Try again.";
        console.log(err);
      }
    }
  </script>
</body>
</html>
